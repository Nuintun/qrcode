!function(){"use strict";function e(e,t,f){let{x:s,y:l,moduleSize:o}=t;e.save(),e.fillStyle=f,e.beginPath(),e.arc(s,l,.5*o,0,2*Math.PI),e.closePath(),e.fill(),e.restore()}function t(e,t,f,s){e.save(),e.lineWidth=1,e.lineCap="square",e.lineJoin="miter",e.strokeStyle=f;let[l]=t,{length:o}=t;e.beginPath(),e.moveTo(l.x,l.y);for(let f=1;f<o;f++){let{x:s,y:l}=t[f];e.lineTo(s,l)}s&&e.closePath(),e.stroke(),e.restore()}self.addEventListener("message",f=>{let{data:s}=f,{image:l,items:o}=s,a=new OffscreenCanvas(l.width,l.height),n=a.getContext("2d");for(let{timing:f,corners:s,finder:a,alignment:r}of(n.drawImage(l,0,0),o))t(n,s,"#00ff00",!0),t(n,[a[2],a[0],a[1]],"#ff0000"),t(n,[f[2],f[0],f[1]],"#00ff00"),e(n,a[0],"#ff0000"),e(n,a[1],"#00ff00"),e(n,a[2],"#0000ff"),null!=r&&e(n,r,"#ff00ff");a.convertToBlob().then(e=>{let t={type:"ok",payload:URL.createObjectURL(e)};self.postMessage(t)},()=>{self.postMessage({type:"error",message:"生成位置定位图失败"})})})}();