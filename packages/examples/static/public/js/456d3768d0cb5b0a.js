"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[815],{8093:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(2363);function u(e){let r=(0,n.useRef)(e);return r.current=(0,n.useMemo)(()=>e,[e]),r}},6705:function(e,r,t){t.d(r,{Z:function(){return c}});var n=t(2363),u=t(8093);function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,t=(0,n.useRef)(),c=(0,u.Z)(r),[s,l]=(0,n.useState)(e),a=(0,n.useCallback)(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.current;clearTimeout(t.current),r<=0?l(e):t.current=setTimeout(()=>{l(e)},r)},[]);return(0,n.useEffect)(()=>()=>{clearTimeout(t.current)},[]),[s,a]}},8929:function(e,r,t){t.r(r),t.d(r,{default:function(){return T}});var n=t(9980),u={result:"ebf18c46",qrcode:"cbfd681a"},c=t(2363),s=t(6705),l={upload:"bc6efe87",preview:"b8c2dc0c"},a=t(5677),i=t(4188),o=t(8093);function f(e){return"function"==typeof e}function d(e){let{valuePropName:r="value"}=e;return r}function m(e,r){let t=d(r);return t in e}function h(e,r){let t=d(r);return e[t]}function p(e){return e?[{uid:e,url:e,name:e,status:"done",thumbUrl:e}]:[]}var j=(0,c.memo)(function(e){let{children:r,value:t,accept:u="image/*"}=e,s=(0,c.useRef)(),[d,j]=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(){let e=(0,c.useRef)(!1);return(0,c.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),(0,c.useCallback)(()=>e.current,[])}(),n=(0,o.Z)(e),u=(0,o.Z)(r),[s=r.defaultValue,l]=(0,c.useState)(()=>m(e,r)?h(e,r):function(e,r){let t=function(e){let{defaultValuePropName:r="defaultValue"}=e;return r}(r);return e[t]}(e,r)),a=(0,o.Z)(s),i=(0,c.useCallback)(function(e){for(var r=arguments.length,c=Array(r>1?r-1:0),s=1;s<r;s++)c[s-1]=arguments[s];if(t()){let{current:r}=a,t=f(e)?e(r):e;if(t!==r){let{current:e}=n,{trigger:r="onChange"}=e,{current:s}=u;m(e,s)||l(t),f(e[r])&&e[r](t,...c)}}},[]);return(0,c.useEffect)(()=>{if(m(e,r)){let t=h(e,r);t!==s&&l(t)}}),[s,i]}(e),[v,x]=(0,c.useState)(()=>p(d)),Z=(0,c.useCallback)(e=>(j(()=>(s.current&&URL.revokeObjectURL(s.current),s.current=URL.createObjectURL(e),s.current)),!1),[]);return(0,c.useEffect)(()=>{t&&x(p(t))},[t]),(0,n.jsxs)("div",{className:l.upload,children:[(0,n.jsx)(a.Z,{maxCount:1,accept:u,listType:"picture",fileList:v,showUploadList:!1,beforeUpload:Z,children:r}),d&&(0,n.jsx)(i.Z,{src:d,className:l.preview})]})}),v=t(6123),x=t(9882),Z=t(5294),g=t(7571),b=t(3963),k=t(9738),w=t(438),y=t(7255),R=t.p+"images/3db910008d877cd2.jpg",C=t(5263);let{Item:L,useForm:U,useWatch:E}=Z.default,N=new Worker(new URL(t.p+t.u(214),t.b)),I=(0,c.memo)(function(e){let{value:r}=e;if(r){let{data:e}=r;switch(r.type){case"ok":return(0,n.jsx)(i.Z,{className:u.qrcode,src:e,alt:"qrcode"});case"error":return(0,n.jsx)(g.Z,{type:"error",message:e,showIcon:!0});default:return(0,n.jsx)(g.Z,{type:"error",message:"unknown error",showIcon:!0})}}return null});var T=(0,c.memo)(function(){let[e]=U(),r=(0,c.useMemo)(()=>({image:R,strict:!1,invert:!1}),[]),t=E(["image"],e),l=(0,c.useRef)(!1),[a,i]=(0,s.Z)(!1),[o,f]=(0,c.useState)();(0,c.useEffect)(()=>{let e=e=>{let{data:r}=e;f(r),i(!1),l.current=!1};return N.addEventListener("message",e),()=>{N.removeEventListener("message",e)}},[]);let d=(0,c.useCallback)(e=>{if(!l.current){i(!0),l.current=!0;let r=new self.Image;r.crossOrigin="anonymous",r.onerror=()=>{i(!1)},r.onload=()=>{createImageBitmap(r).then(r=>{N.postMessage({...e,image:r},[r])})},r.src=e.image}},[]);return(0,n.jsxs)("div",{className:"page",children:[(0,n.jsx)(Z.default,{form:e,onFinish:d,layout:"vertical",initialValues:r,children:(0,n.jsxs)(b.Z,{gutter:24,children:[(0,n.jsx)(k.Z,{span:24,children:(0,n.jsx)(L,{name:"image",children:(0,n.jsx)(j,{children:(0,n.jsx)(w.ZP,{icon:(0,n.jsx)(v.Z,{}),children:"选择图片"})})})}),(0,n.jsx)(k.Z,{span:24,children:(0,n.jsx)(L,{name:"strict",label:"严格模式",valuePropName:"checked",children:(0,n.jsx)(y.Z,{})})}),(0,n.jsx)(k.Z,{span:24,children:(0,n.jsx)(L,{name:"invert",label:"图片反色",valuePropName:"checked",children:(0,n.jsx)(y.Z,{})})}),(0,n.jsx)(k.Z,{span:24,children:(0,n.jsx)(w.ZP,{type:"primary",htmlType:"submit",loading:a,disabled:!t,icon:(0,n.jsx)(x.Z,{component:C.Z}),children:"解码"})})]})}),(0,n.jsx)("div",{className:u.result,children:(0,n.jsx)(I,{value:o})})]})})}}]);