!function(){"use strict";function e(e,t,f){let{x:s,y:l,moduleSize:o}=t;e.save(),e.fillStyle=f,e.beginPath(),e.arc(s,l,.6*o,0,2*Math.PI),e.closePath(),e.fill(),e.restore()}function t(e,t,f,s){e.save(),e.lineWidth=1,e.lineCap="square",e.lineJoin="miter",e.strokeStyle=f;let[l]=t,{length:o}=t;e.beginPath(),e.moveTo(l.x,l.y);for(let f=1;f<o;f++){let{x:s,y:l}=t[f];e.lineTo(s,l)}s&&e.closePath(),e.stroke(),e.restore()}self.addEventListener("message",f=>{let{data:s}=f,{image:l,timing:o,corners:a,finder:n,alignment:r}=s,i=new OffscreenCanvas(l.width,l.height),c=i.getContext("2d");c.drawImage(l,0,0),t(c,a,"#00ff00",!0),t(c,[n[2],n[0],n[1]],"#ff0000"),t(c,[o[2],o[0],o[1]],"#00ff00"),e(c,n[0],"#ff0000"),e(c,n[1],"#00ff00"),e(c,n[2],"#0000ff"),null!=r&&e(c,r,"#ff00ff"),i.convertToBlob().then(e=>{let t={type:"ok",payload:URL.createObjectURL(e)};self.postMessage(t)},()=>{self.postMessage({type:"error",message:"生成定位图失败"})})})}();