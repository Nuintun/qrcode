/*! For license information please see 21aa02a93f866028.js.LICENSE.txt */
!function(){"use strict";function e(e){return 0|e}function t(t){return e(t+(t<0?-.5:.5))}function n(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}function r(e,t=0,n=e.length){let r=0;for(let s=t;s<n;s++)r+=e[s];return r}class s{#e;#t;#n;#r;constructor(e,t,n){const r=Math.ceil(e/32),s=r*t;if(this.#e=e,this.#t=t,this.#n=r,n instanceof Int32Array){if(n.length!==s)throw new Error(`matrix bits capacity mismatch: ${s}`);this.#r=n}else this.#r=new Int32Array(s)}#s(t,n){return n*this.#n+e(t/32)}get width(){return this.#e}get height(){return this.#t}set(e,t){const n=this.#s(e,t);this.#r[n]|=1<<(31&e)}get(e,t){const n=this.#s(e,t);return this.#r[n]>>>(31&e)&1}flip(e,t){if(null!=e&&null!=t){const n=this.#s(e,t);this.#r[n]^=1<<(31&e)}else{const e=this.#r,{length:t}=e;for(let n=0;n<t;n++)e[n]=~e[n]}}clone(){return new s(this.#e,this.#t,new Int32Array(this.#r))}setRegion(t,n,r,s){const o=this.#r,i=t+r,w=n+s,a=this.#n;for(let r=n;r<w;r++){const n=r*a;for(let r=t;r<i;r++)o[n+e(r/32)]|=1<<(31&r)}}}const o=3,i=32;function w(t,n,r){const w=new s(n,r),a=new Int32Array(i);for(let s=1;s<5;s++){const i=e(4*n/5),w=e(r*s/5)*n;for(let r=e(n/5);r<i;r++){a[t[w+r]>>o]++}}const c=function(e){let t=0,n=0,r=0;const{length:s}=e;for(let o=0;o<s;o++)e[o]>n&&(t=o,n=e[o]),e[o]>r&&(r=e[o]);let w=0,a=0;for(let n=0;n<s;n++){const r=n-t,s=e[n]*r*r;s>a&&(w=n,a=s)}if(t>w&&([t,w]=[w,t]),w-t<=i/16)return-1;let c=-1,l=w-1;for(let n=w-1;n>t;n--){const s=n-t,o=s*s*(w-n)*(r-e[n]);o>c&&(l=n,c=o)}return l<<o}(a);if(c>0)for(let e=0;e<r;e++){const r=e*n;for(let s=0;s<n;s++){t[r+s]<c&&w.set(s,e)}}return w}const a=3,c=24,l=1<<a,u=l-1,h=5*l;function f(e){let t=e>>a;return e&u&&t++,t}function d(e,t){return e<2?2:Math.min(e,t)}function g(e,t){return(e<<=a)>t?t:e}function m(e,t,n){const r=t-l,o=n-l,i=f(t),w=f(n),u=new s(t,n),h=function(e,t,n){const r=[],s=t-l,o=n-l,i=f(t),w=f(n);for(let n=0;n<w;n++){r[n]=new Int32Array(i);const w=g(n,o);for(let o=0;o<i;o++){let i=0,u=0,h=255;for(let n=0,r=w*t+g(o,s);n<l;n++,r+=t){for(let t=0;t<l;t++){const n=e[r+t];i+=n,n<h&&(h=n),n>u&&(u=n)}if(u-h>c)for(n++,r+=t;n<l;n++,r+=t)for(let t=0;t<l;t++)i+=e[r+t]}let f=i>>2*a;if(u-h<=c&&(f=h/2,n>0&&o>0)){const e=(r[n-1][o]+2*r[n][o-1]+r[n-1][o-1])/4;h<e&&(f=e)}r[n][o]=f}}return r}(e,t,n);for(let n=0;n<w;n++){const s=d(n,w-3),a=g(n,o);for(let n=0;n<i;n++){let o=0;const w=d(n,i-3),c=g(n,r);for(let e=-2;e<=2;e++){const t=h[s+e];o+=t[w-2]+t[w-1]+t[w]+t[w+1]+t[w+2]}const f=o/25;for(let n=0,r=a*t+c;n<l;n++,r+=t)for(let t=0;t<l;t++)e[r+t]<=f&&u.set(c+t,a+n)}}return u}class b{#o;#i;constructor(e,t){this.#o=e,this.#i=t}get x(){return this.#o}get y(){return this.#i}}function p(e,t){return Math.sqrt(y(e,t))}function y(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function x(e,t,n){const{x:r,y:s}=e,{x:o,y:i}=t,{x:w,y:a}=n;return Math.abs(r*(i-a)+o*(a-s)+w*(s-i))/2}class z extends b{#w;#e;#t;#a;#c;#l=1;#u;#h;static noise(e){return e.#w}static width(e){return e.#e}static height(e){return e.#t}static combined(e){return e.#l}static rect(e){return e.#a}static equals(e,t,n,r,s){const{modules:o}=e.#u,i=e.#h;if(Math.abs(t-e.x)<=i&&Math.abs(n-e.y)<=i){const t=e.#c,n=(r+s)/o/2,i=Math.abs(n-t);if(i<=1||i<=t)return!0}return!1}static combine(e,t,n,r,s,o){const i=e.#l,w=i+1,a=(e.x*i+t)/w,c=(e.y*i+n)/w,l=(e.#w*i+o)/w,u=(e.#e*i+r)/w,h=(e.#t*i+s)/w,f=new z(e.#u,a,c,u,h,l);return f.#l=w,f}constructor(t,n,r,s,o,i){super(n,r);const{modules:w}=t,a=s/2,c=o/2,l=s/w,u=o/w,h=l/2,f=u/2,d=function({ratios:t}){return t[e(t.length/2)]/2}(t),g=(l+u)/2;this.#w=i,this.#e=s,this.#t=o,this.#u=t,this.#c=g,this.#a=[n-a+h,r-c+f,n+a-h,r+c-f],this.#h=g*d}get moduleSize(){return this.#c}}class C{#f;#d;constructor(e,t){this.#f=e,this.#d=t}sample(t,n){const r=this.#f,o=r.width,i=this.#d,w=r.height,a=new s(t,n);for(let s=0;s<n;s++)for(let n=0;n<t;n++){const[t,c]=i.mapping(n+.5,s+.5),l=e(t),u=e(c);l>=0&&u>=0&&l<o&&u<w&&r.get(l,u)&&a.set(n,s)}return a}}class I{#g;#m;constructor(e,t){this.#g=e,this.#m=t}get count(){return this.#g}get numDataCodewords(){return this.#m}}class S{#b;#p;#y;#x;#z;constructor(e,...t){let n=0,r=0;for(const{count:e,numDataCodewords:s}of t)n+=e,r+=s*e;const s=e*n;this.#b=t,this.#y=s,this.#x=r,this.#z=e,this.#p=r+s}get ecBlocks(){return this.#b}get numTotalCodewords(){return this.#p}get numTotalECCodewords(){return this.#y}get numTotalDataCodewords(){return this.#x}get numECCodewordsPerBlock(){return this.#z}}const E=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017];class v{#C;#I;#b;#S;constructor(e,t,...n){this.#I=e,this.#b=n,this.#C=17+4*e,this.#S=t}get size(){return this.#C}get version(){return this.#I}get alignmentPatterns(){return this.#S}getECBlocks({level:e}){return this.#b[e]}}const k=[new v(1,[],new S(7,new I(1,19)),new S(10,new I(1,16)),new S(13,new I(1,13)),new S(17,new I(1,9))),new v(2,[6,18],new S(10,new I(1,34)),new S(16,new I(1,28)),new S(22,new I(1,22)),new S(28,new I(1,16))),new v(3,[6,22],new S(15,new I(1,55)),new S(26,new I(1,44)),new S(18,new I(2,17)),new S(22,new I(2,13))),new v(4,[6,26],new S(20,new I(1,80)),new S(18,new I(2,32)),new S(26,new I(2,24)),new S(16,new I(4,9))),new v(5,[6,30],new S(26,new I(1,108)),new S(24,new I(2,43)),new S(18,new I(2,15),new I(2,16)),new S(22,new I(2,11),new I(2,12))),new v(6,[6,34],new S(18,new I(2,68)),new S(16,new I(4,27)),new S(24,new I(4,19)),new S(28,new I(4,15))),new v(7,[6,22,38],new S(20,new I(2,78)),new S(18,new I(4,31)),new S(18,new I(2,14),new I(4,15)),new S(26,new I(4,13),new I(1,14))),new v(8,[6,24,42],new S(24,new I(2,97)),new S(22,new I(2,38),new I(2,39)),new S(22,new I(4,18),new I(2,19)),new S(26,new I(4,14),new I(2,15))),new v(9,[6,26,46],new S(30,new I(2,116)),new S(22,new I(3,36),new I(2,37)),new S(20,new I(4,16),new I(4,17)),new S(24,new I(4,12),new I(4,13))),new v(10,[6,28,50],new S(18,new I(2,68),new I(2,69)),new S(26,new I(4,43),new I(1,44)),new S(24,new I(6,19),new I(2,20)),new S(28,new I(6,15),new I(2,16))),new v(11,[6,30,54],new S(20,new I(4,81)),new S(30,new I(1,50),new I(4,51)),new S(28,new I(4,22),new I(4,23)),new S(24,new I(3,12),new I(8,13))),new v(12,[6,32,58],new S(24,new I(2,92),new I(2,93)),new S(22,new I(6,36),new I(2,37)),new S(26,new I(4,20),new I(6,21)),new S(28,new I(7,14),new I(4,15))),new v(13,[6,34,62],new S(26,new I(4,107)),new S(22,new I(8,37),new I(1,38)),new S(24,new I(8,20),new I(4,21)),new S(22,new I(12,11),new I(4,12))),new v(14,[6,26,46,66],new S(30,new I(3,115),new I(1,116)),new S(24,new I(4,40),new I(5,41)),new S(20,new I(11,16),new I(5,17)),new S(24,new I(11,12),new I(5,13))),new v(15,[6,26,48,70],new S(22,new I(5,87),new I(1,88)),new S(24,new I(5,41),new I(5,42)),new S(30,new I(5,24),new I(7,25)),new S(24,new I(11,12),new I(7,13))),new v(16,[6,26,50,74],new S(24,new I(5,98),new I(1,99)),new S(28,new I(7,45),new I(3,46)),new S(24,new I(15,19),new I(2,20)),new S(30,new I(3,15),new I(13,16))),new v(17,[6,30,54,78],new S(28,new I(1,107),new I(5,108)),new S(28,new I(10,46),new I(1,47)),new S(28,new I(1,22),new I(15,23)),new S(28,new I(2,14),new I(17,15))),new v(18,[6,30,56,82],new S(30,new I(5,120),new I(1,121)),new S(26,new I(9,43),new I(4,44)),new S(28,new I(17,22),new I(1,23)),new S(28,new I(2,14),new I(19,15))),new v(19,[6,30,58,86],new S(28,new I(3,113),new I(4,114)),new S(26,new I(3,44),new I(11,45)),new S(26,new I(17,21),new I(4,22)),new S(26,new I(9,13),new I(16,14))),new v(20,[6,34,62,90],new S(28,new I(3,107),new I(5,108)),new S(26,new I(3,41),new I(13,42)),new S(30,new I(15,24),new I(5,25)),new S(28,new I(15,15),new I(10,16))),new v(21,[6,28,50,72,94],new S(28,new I(4,116),new I(4,117)),new S(26,new I(17,42)),new S(28,new I(17,22),new I(6,23)),new S(30,new I(19,16),new I(6,17))),new v(22,[6,26,50,74,98],new S(28,new I(2,111),new I(7,112)),new S(28,new I(17,46)),new S(30,new I(7,24),new I(16,25)),new S(24,new I(34,13))),new v(23,[6,30,54,78,102],new S(30,new I(4,121),new I(5,122)),new S(28,new I(4,47),new I(14,48)),new S(30,new I(11,24),new I(14,25)),new S(30,new I(16,15),new I(14,16))),new v(24,[6,28,54,80,106],new S(30,new I(6,117),new I(4,118)),new S(28,new I(6,45),new I(14,46)),new S(30,new I(11,24),new I(16,25)),new S(30,new I(30,16),new I(2,17))),new v(25,[6,32,58,84,110],new S(26,new I(8,106),new I(4,107)),new S(28,new I(8,47),new I(13,48)),new S(30,new I(7,24),new I(22,25)),new S(30,new I(22,15),new I(13,16))),new v(26,[6,30,58,86,114],new S(28,new I(10,114),new I(2,115)),new S(28,new I(19,46),new I(4,47)),new S(28,new I(28,22),new I(6,23)),new S(30,new I(33,16),new I(4,17))),new v(27,[6,34,62,90,118],new S(30,new I(8,122),new I(4,123)),new S(28,new I(22,45),new I(3,46)),new S(30,new I(8,23),new I(26,24)),new S(30,new I(12,15),new I(28,16))),new v(28,[6,26,50,74,98,122],new S(30,new I(3,117),new I(10,118)),new S(28,new I(3,45),new I(23,46)),new S(30,new I(4,24),new I(31,25)),new S(30,new I(11,15),new I(31,16))),new v(29,[6,30,54,78,102,126],new S(30,new I(7,116),new I(7,117)),new S(28,new I(21,45),new I(7,46)),new S(30,new I(1,23),new I(37,24)),new S(30,new I(19,15),new I(26,16))),new v(30,[6,26,52,78,104,130],new S(30,new I(5,115),new I(10,116)),new S(28,new I(19,47),new I(10,48)),new S(30,new I(15,24),new I(25,25)),new S(30,new I(23,15),new I(25,16))),new v(31,[6,30,56,82,108,134],new S(30,new I(13,115),new I(3,116)),new S(28,new I(2,46),new I(29,47)),new S(30,new I(42,24),new I(1,25)),new S(30,new I(23,15),new I(28,16))),new v(32,[6,34,60,86,112,138],new S(30,new I(17,115)),new S(28,new I(10,46),new I(23,47)),new S(30,new I(10,24),new I(35,25)),new S(30,new I(19,15),new I(35,16))),new v(33,[6,30,58,86,114,142],new S(30,new I(17,115),new I(1,116)),new S(28,new I(14,46),new I(21,47)),new S(30,new I(29,24),new I(19,25)),new S(30,new I(11,15),new I(46,16))),new v(34,[6,34,62,90,118,146],new S(30,new I(13,115),new I(6,116)),new S(28,new I(14,46),new I(23,47)),new S(30,new I(44,24),new I(7,25)),new S(30,new I(59,16),new I(1,17))),new v(35,[6,30,54,78,102,126,150],new S(30,new I(12,121),new I(7,122)),new S(28,new I(12,47),new I(26,48)),new S(30,new I(39,24),new I(14,25)),new S(30,new I(22,15),new I(41,16))),new v(36,[6,24,50,76,102,128,154],new S(30,new I(6,121),new I(14,122)),new S(28,new I(6,47),new I(34,48)),new S(30,new I(46,24),new I(10,25)),new S(30,new I(2,15),new I(64,16))),new v(37,[6,28,54,80,106,132,158],new S(30,new I(17,122),new I(4,123)),new S(28,new I(29,46),new I(14,47)),new S(30,new I(49,24),new I(10,25)),new S(30,new I(24,15),new I(46,16))),new v(38,[6,32,58,84,110,136,162],new S(30,new I(4,122),new I(18,123)),new S(28,new I(13,46),new I(32,47)),new S(30,new I(48,24),new I(14,25)),new S(30,new I(42,15),new I(32,16))),new v(39,[6,26,54,82,110,138,166],new S(30,new I(20,117),new I(4,118)),new S(28,new I(40,47),new I(7,48)),new S(30,new I(43,24),new I(22,25)),new S(30,new I(10,15),new I(67,16))),new v(40,[6,30,58,86,114,142,170],new S(30,new I(19,118),new I(6,119)),new S(28,new I(18,47),new I(31,48)),new S(30,new I(34,24),new I(34,25)),new S(30,new I(20,15),new I(61,16)))];class A{#E;#v;#k;#A;#O;#M;constructor(t,n){let r=e(n.x),s=e(n.y),o=e(t.x),i=e(t.y);const w=Math.abs(s-i)>Math.abs(r-o);w&&([o,i,r,s]=[i,o,s,r]);const a=o<r?1:-1;this.#A=w,this.#k=r+a,this.#E=new b(r,s),this.#v=new b(o,i),this.#O=[a,i<s?1:-1],this.#M=[Math.abs(r-o),Math.abs(s-i)]}*points(){const t=this.#k,n=this.#A,{y:r}=this.#E,[s,o]=this.#O,[i,w]=this.#M,{x:a,y:c}=this.#v;let l=e(-i/2);for(let e=a,u=c;e!==t;e+=s)if(yield[n?u:e,n?e:u],l+=w,l>0){if(u===r)break;u+=o,l-=i}}}function O(e,t,n){let r=0;const{width:s,height:o}=e,i=(t.x+n.x)/2,w=(t.y+n.y)/2,a=new b(i,w),c=new A(t,a).points();for(const[n,i]of c){if(n<0||i<0||n>=s||i>=o)return 2===r?p(t,new b(n,i)):NaN;if(1===r==(1===e.get(n,i))){if(2===r)return p(t,new b(n,i));r++}}return NaN}function M(e,t,n){const r=O(e,t,n);if(Number.isNaN(r))return NaN;const{x:s,y:o}=n,{x:i,y:w}=t,a=O(e,t,new b(i-(s-i),w-(o-w)));return Number.isNaN(a)?NaN:r+a-1}function T(t,n,r){const s=new b(e(n.x),e(n.y)),o=new b(e(r.x),e(r.y)),i=M(t,s,o),w=M(t,o,s);return Number.isNaN(i)?w/7:Number.isNaN(w)?i/7:(i+w)/14}function N(e,t){return e>t?e/t:t/e}function R(e,t){const n=Math.max(N(z.width(e),z.width(t)),N(z.height(e),z.height(t)));return n*n}class _{#T;#C;#f;#N;#c;#R;#_;static area(e){const[t,n,r]=e.#R,s=_.bottomRight(e);if(null==e.#T){const o=x(t,n,s),i=x(s,r,t);e.#T=o+i}return e.#T}static moduleSizes(e){if(null==e.#_){const t=e.#f,[n,r,s]=e.#R;e.#_=[T(t,n,r),T(t,n,s)]}return e.#_}static size(e){if(null==e.#C){const n=_.moduleSize(e);e.#C=function([e,n,r],s){const o=t((p(e,n)+p(e,r))/s/2)+7;switch(3&o){case 0:return o+1;case 2:return o-1;case 3:return Math.min(o+2,177)}return o}(e.#R,n)}return e.#C}static moduleSize(e){return null==e.#c&&(e.#c=r(_.moduleSizes(e))/2),e.#c}static contains(e,t){const n=_.area(e),[r,s,o]=e.#R,i=_.bottomRight(e);return x(r,s,t)+x(s,i,t)+x(i,o,t)+x(o,r,t)-n<1}static bottomRight(e){return null==e.#N&&(e.#N=function([e,t,n]){const{x:r,y:s}=e,o=t.x+n.x-r,i=t.y+n.y-s;return new b(o,i)}(e.#R)),e.#N}constructor(e,t){this.#f=e,this.#R=function(e){let t,n,r;const[s,o,i]=e,w=y(s,o)*R(s,o),a=y(s,i)*R(s,i),c=y(o,i)*R(o,i);return c>=w&&c>=a?[t,r,n]=e:a>=c&&a>=w?[r,t,n]=e:[r,n,t]=e,function(e,t,n){const{x:r,y:s}=t;return(n.x-r)*(e.y-s)-(n.y-s)*(e.x-r)}(r,t,n)<0&&([r,n]=[n,r]),[t,n,r]}(t)}get topLeft(){return this.#R[0]}get topRight(){return this.#R[1]}get bottomLeft(){return this.#R[2]}}function D({topLeft:e,topRight:t,bottomLeft:n}){const{x:r,y:s}=e,o=t.x-r,i=t.y-s,w=n.x-r,a=n.y-s,c=o*w+i*a,l=(o*o+i*i)*(w*w+a*a);return Math.acos(c/Math.sqrt(l))}class B{#f;#D;#B;#d;constructor(e,t,n,r){const s=new C(e,t),o=_.size(n);this.#f=e,this.#d=t,this.#B=n,this.#D=r,this.#f=s.sample(o,o)}get matrix(){return this.#f}get finder(){return this.#B}get alignment(){return this.#D}get size(){return _.size(this.#B)}get moduleSize(){return _.moduleSize(this.#B)}mapping(e,t){return[e,t]=this.#d.mapping(e,t),new b(e,t)}}class P{#P;#L;#U;#F;#Z;#H;#j;#$;#q;constructor(e,t,n,r,s,o,i,w,a){this.#P=e,this.#L=r,this.#U=i,this.#F=t,this.#Z=s,this.#H=w,this.#j=n,this.#$=o,this.#q=a}buildAdjoint(){const e=this.#P,t=this.#L,n=this.#U,r=this.#F,s=this.#Z,o=this.#H,i=this.#j,w=this.#$,a=this.#q;return new P(s*a-o*w,o*i-r*a,r*w-s*i,n*w-t*a,e*a-n*i,t*i-e*w,t*o-n*s,n*r-e*o,e*s-t*r)}times(e){const t=this.#P,n=this.#L,r=this.#U,s=this.#F,o=this.#Z,i=this.#H,w=this.#j,a=this.#$,c=this.#q,l=e.#P,u=e.#L,h=e.#U,f=e.#F,d=e.#Z,g=e.#H,m=e.#j,b=e.#$,p=e.#q;return new P(t*l+s*u+w*h,t*f+s*d+w*g,t*m+s*b+w*p,n*l+o*u+a*h,n*f+o*d+a*g,n*m+o*b+a*p,r*l+i*u+c*h,r*f+i*d+c*g,r*m+i*b+c*p)}mapping(e,t){const n=this.#P,r=this.#L,s=this.#U,o=this.#F,i=this.#Z,w=this.#H,a=this.#j,c=this.#$,l=s*e+w*t+this.#q;return[(n*e+o*t+a)/l,(r*e+i*t+c)/l]}}function L(e,t,n,r,s,o,i,w){const a=e-n+s-i,c=t-r+o-w;if(0===a&&0===c)return new P(n-e,s-n,e,r-t,o-r,t,0,0,1);{const l=n-s,u=i-s,h=r-o,f=w-o,d=l*f-u*h,g=(a*f-u*c)/d,m=(l*c-a*h)/d;return new P(n-e+g*n,i-e+m*i,e,r-t+g*r,w-t+m*w,t,g,m,1)}}function U(e,t,n,r,s,o,i,w,a,c,l,u,h,f,d,g){const m=function(e,t,n,r,s,o,i,w){return L(e,t,n,r,s,o,i,w).buildAdjoint()}(e,t,n,r,s,o,i,w);return L(a,c,l,u,h,f,d,g).times(m)}function F(e,t){let n,r,s,o;const{x:i,y:w}=e.topLeft,{x:a,y:c}=e.topRight,{x:l,y:u}=e.bottomLeft,h=_.size(e)-3.5;return null!=t?(n=t.x,r=t.y,s=h-3,o=s):(n=a+l-i,r=c+u-w,s=h,o=h),U(3.5,3.5,h,3.5,s,o,3.5,h,i,w,a,c,n,r,l,u)}function Z(e,t){return t>e?1:t<e?-1:0}function H(e,t){const[n,,r]=z.rect(e);return t>0?r:t<0?n:e.x}function j(e,t){const[,n,,r]=z.rect(e);return t>0?r:t<0?n:e.y}function $(e,t,n,r){const{x:s,y:o}=t,{x:i,y:w}=e,{x:a,y:c}=n,l=Z(s,a),u=Z(o,c),h=H(t,l),f=j(t,u),d=H(e,l),g=j(e,u);return 0===l||0===u?[new b(d,g),new b(h,f)]:(r?l===u:l!==u)?[new b(i,g),new b(s,f)]:[new b(d,w),new b(h,o)]}function q(t,n,r,s){const o=s+8,i=new A(n,r).points();let w=1,a=t.get(e(n.x),e(n.y));for(const[e,n]of i){const r=t.get(e,n);if(r!==a&&(w++,a=r,w>o))return!1}return w>=s-14-Math.max(2,(s-17)/4)}function G(e,t,n){const{topLeft:r,topRight:s,bottomLeft:o}=t,[i,w]=n?$(r,o,s,!0):$(r,s,o);return q(e,i,w,_.size(t))}function J(e,t,n,r){const[s,o]=t.mapping(r?6.5:7.5,r?7.5:6.5),[i,w]=t.mapping(r?6.5:n-7.5,r?n-7.5:6.5);return q(e,new b(s,o),new b(i,w),n)}class K{#G;#u;constructor(e){this.#u=e,this.#G=r(e)}get modules(){return this.#G}get ratios(){return this.#u}}const Q=new K([1,1,3,1,1]),V=new K([1,1,1,1,1]),Y=new K([1,1,1]);function W(e,{ratios:t,modules:n}){let s=0;const{length:o}=t,i=r(e),w=i/n;for(let n=0;n<o;n++)s+=Math.abs(e[n]-t[n]*w);return[s/i,w]}function X(e,t){const{length:n}=e,r=n-1;for(let t=0;t<r;t++)e[t]=e[t+1];e[r]=t}function ee(t,n,r,s,o){n=e(n),r=e(r);let i=-1,w=n,a=r;const c=[0,0,0,0,0],{width:l,height:u}=t,h=o?-1:1,f=()=>{w+=i,a-=i*h},d=()=>t.get(w,a);for(;w>=0&&a>=0&&a<u&&d();)f(),c[2]++;for(;w>=0&&a>=0&&a<u&&!d();)f(),c[1]++;for(;w>=0&&a>=0&&a<u&&c[0]<s&&d();)f(),c[0]++;for(i=1,w=n+i,a=r-i*h;w<l&&a>=0&&a<u&&d();)f(),c[2]++;for(;w<l&&a>=0&&a<u&&!d();)f(),c[3]++;for(;w<l&&a>=0&&a<u&&c[4]<s&&d();)f(),c[4]++;return c}function te(t,n){const s=[],o=e(t.length/2);for(let e=0;e<=o;e++){const n=o+e+1;s.push(r(t,o-e,n)/2+r(t,n))}return n-(2*s[0]+r(s,1))/(o+2)}const ne=Math.PI/180,re=.625,se=.5,oe=.5,ie=40*ne,we=140*ne;function ae(t,n,r,s,o,i){const[w,a]=function(t,n,r,s,o){n=e(n),r=e(r);let i=o?r:n;const w=[0,0,0,0,0],a=o?t.height:t.width,c=()=>o?t.get(n,i):t.get(i,r);for(;i>=0&&c();)i--,w[2]++;for(;i>=0&&!c();)i--,w[1]++;for(;i>=0&&w[0]<s&&c();)i--,w[0]++;for(i=(o?r:n)+1;i<a&&c();)i++,w[2]++;for(;i<a&&!c();)i++,w[3]++;for(;i<a&&w[4]<s&&c();)i++,w[4]++;return[w,i]}(t,n,r,s,i);return[le(w,o)?te(w,a):NaN,w]}function ce(e,t,n){return e>t&&([e,t]=[t,e]),t-e<=t*n}function le(e,{ratios:t,modules:n}){const{length:r}=e,s=function(e){let t=0;for(const n of e){if(0===n)return NaN;t+=n}return t}(e);if(s>=n){const o=s/n,i=o*re+se;for(let n=0;n<r;n++){const r=t[n],s=e[n];if(Math.abs(s-o*r)>i)return!1}return!0}return!1}class ue{#J;#f;#u;#R=[];constructor(e,t,n){this.#f=e,this.#u=t,this.#J=n}get matrix(){return this.#f}get patterns(){return this.#R}match(e,t,n,s){const o=this.#f,i=this.#u;let w=te(n,e);const[a,c]=ae(o,w,t,s,i,!0);if(a>=0){let e;if([w,e]=ae(o,w,a,s,i),w>=0){const t=ee(o,w,a,s),n=ee(o,w,a,s,!0);if(function(e,t,n,r){return r?le(e,n)&&le(t,n):le(e,n)||le(t,n)}(t,n,i,this.#J)){const s=function(e,...t){let n=0,s=0;const{length:o}=t,i=[];for(const r of t){const[t,s]=W(r,e);n+=t,i.push(s)}const w=r(i),a=w/o;for(const e of i)s+=Math.abs(e-a);return n+s/w}(i,e,c,t,n),o=r(e),l=r(c),u=this.#R,{length:h}=u;let f=!1;for(let e=0;e<h;e++){const t=u[e];if(z.equals(t,w,a,o,l)){f=!0,u[e]=z.combine(t,w,a,o,l,s);break}}f||u.push(new z(i,w,a,o,l,s))}}}}}function he(e,t,n){let r=0;const{topLeft:s,topRight:o,bottomLeft:i}=e;for(const w of t)if(w!==s&&w!==o&&w!==i){let t;if(n.has(w)&&(t=_.contains(e,w),t))return!0;if(z.noise(w)<1&&(null==t?_.contains(e,w):t)&&++r>3)return!0}return!1}class fe extends ue{constructor(e,t){super(e,Q,t)}*groups(){const e=this.patterns.filter((e=>z.combined(e)>=3&&z.noise(e)<=1.5)),{length:n}=e;if(3===n){const t=new _(this.matrix,e),n=_.size(t);n>=21&&n<=177&&(yield t)}else if(n>3){const r=n-2,s=n-1,o=new Map;for(let i=0;i<r;i++){const r=e[i],w=r.moduleSize;if(!o.has(r))for(let a=i+1;a<s;a++){const s=e[a],i=s.moduleSize;if(o.has(r))break;if(!o.has(s)&&ce(w,i,oe))for(let c=a+1;c<n;c++){const n=e[c],a=n.moduleSize;if(o.has(r)||o.has(s))break;if(!ce(w,a,oe)||!ce(i,a,oe))continue;const{matrix:l}=this,u=new _(l,[r,s,n]),h=D(u);if(h>=ie&&h<=we){const[i,w]=_.moduleSizes(u);if(i>=1&&w>=1){const{topLeft:a,topRight:c,bottomLeft:h}=u,f=p(a,c),d=p(a,h),g=t(f/i),m=t(d/w);if(Math.abs(g-m)<=4){const t=_.size(u);t>=21&&t<=177&&!he(u,e,o)&&(G(l,u)||G(l,u,!0))&&(yield u)&&(o.set(r,!0),o.set(s,!0),o.set(n,!0))}}}}}}}}find(e,t,n,r){const{matrix:s}=this,o=e+n,i=t+r,w=(e,t,n,r,s,o)=>{X(n,r),X(s,o),1===s[0]&&0===s[1]&&1===s[2]&&0===s[3]&&1===s[4]&&le(n,Q)&&this.match(e,t,n,n[2])};for(let n=t;n<i;n++){let t=e;for(;t<o&&!s.get(t,n);)t++;let r=0,i=s.get(t,n);const a=[0,0,0,0,0],c=[-1,-1,-1,-1,-1];for(;t<o;){const e=s.get(t,n);e===i?r++:(w(t,n,a,r,c,i),r=1,i=e),t++}w(t,n,a,r,c,i)}}}class de extends ue{constructor(e,t){super(e,V,t)}filter(e,t){const n=this.patterns.filter((e=>z.noise(e)<=2.5&&ce(e.moduleSize,t,oe)));n.length>1&&n.sort(((n,r)=>{const s=z.noise(n),o=z.noise(r),i=Math.abs(n.moduleSize-t),w=Math.abs(r.moduleSize-t);return(p(n,e)+i)*s-(p(r,e)+w)*o}));const r=n.slice(0,2);return r.push(e),r}find(e,t,n,r){const{matrix:s}=this,o=e+n,i=t+r,w=(e,t,n,r,s,o)=>{X(n,r),X(s,o),0===s[0]&&1===s[1]&&0===s[2]&&le(n,Y)&&this.match(e,t,n,n[1])};for(let n=t;n<i;n++){let t=e;for(;t<o&&!s.get(t,n);)t++;let r=0,i=s.get(t,n);const a=[0,0,0],c=[-1,-1,-1];for(;t<o;){const e=s.get(t,n);e===i?r++:(w(t,n,a,r,c,i),r=1,i=e),t++}w(t,n,a,r,c,i)}}}function ge(t,n,r){const s=_.size(n),o=Math.min(20,e(s/4)),i=function(e){const{x:t,y:n}=e.topLeft,r=1-3/(_.size(e)-7),s=_.bottomRight(e),[o,i]=_.moduleSizes(e),w=t+(s.x-t)*r,a=n+(s.y-n)*r;return new z(V,w,a,5*o,5*i,0)}(n),w=new de(t,r),a=_.moduleSize(n),{x:c,y:l}=i,u=Math.ceil(a*o),h=e(Math.max(0,l-u)),f=e(Math.max(0,c-u)),d=e(Math.min(t.width-1,c+u)),g=e(Math.min(t.height-1,l+u));return w.find(f,h,d-f,g-h),w.filter(i,a)}class me{#K;constructor(e={}){this.#K=e}*detect(e){const{strict:t}=this.#K,{width:n,height:r}=e,s=new fe(e,t);s.find(0,0,n,r);const o=s.groups();let i=o.next();for(;!i.done;){let n=!1;const r=i.value,s=_.size(r);if(s>=25){const o=ge(e,r,t);for(const t of o){const o=F(r,t);if(J(e,o,s)&&J(e,o,s,!0)&&(n=yield new B(e,o,r,t),n))break}}else{const t=F(r);J(e,t,s)&&J(e,t,s,!0)&&(n=yield new B(e,t,r))}i=o.next(n)}}}class be{#Q;#V;#Y;#I;#W;#X;constructor(e,t,{mask:n,level:r},s,o){this.#Q=n,this.#V=r,this.#Y=o,this.#I=t,this.#X=e,this.#W=s}get mask(){return this.#Q}get level(){return this.#V.name}get version(){return this.#I.version}get mirror(){return this.#Y}get content(){return this.#X.content}get corrected(){return this.#W}get symbology(){return this.#X.symbology}get fnc1(){return this.#X.fnc1}get codewords(){return this.#X.codewords}get structured(){return this.#X.structured}}class pe{#ee;#te;#ne;constructor(e){this.#ee=e,this.#te=0,this.#ne=0}get bitOffset(){return this.#te}get byteOffset(){return this.#ne}read(e){let t=0,n=this.#te,r=this.#ne;const s=this.#ee;if(n>0){const o=8-n,i=Math.min(e,o),w=o-i,a=255>>8-i<<w;e-=i,n+=i,t=(s[r]&a)>>w,8===n&&(r++,n=0)}if(e>0){for(;e>=8;)e-=8,t=t<<8|255&s[r++];if(e>0){const o=8-e,i=255>>o<<o;n+=e,t=t<<e|(s[r]&i)>>o}}return this.#te=n,this.#ne=r,t}available(){return 8*(this.#ee.length-this.#ne)-this.#te}}const ye=new Map;function xe(e){const t=ye.get(e);if(null!=t)return t;throw new Error("illegal mode bits")}class ze{#r;#re;static TERMINATOR=new ze([0,0,0],0);static NUMERIC=new ze([10,12,14],1);static ALPHANUMERIC=new ze([9,11,13],2);static STRUCTURED_APPEND=new ze([0,0,0],3);static BYTE=new ze([8,16,16],4);static ECI=new ze([0,0,0],7);static KANJI=new ze([8,10,12],8);static FNC1_FIRST_POSITION=new ze([0,0,0],5);static FNC1_SECOND_POSITION=new ze([0,0,0],9);static HANZI=new ze([8,10,12],13);constructor(e,t){this.#r=t,this.#re=new Int32Array(e),ye.set(t,this)}get bits(){return this.#r}getCharacterCountBits({version:e}){let t;return t=e<=9?0:e<=26?1:2,this.#re[t]}}const Ce=new Map;class Ie{#se;#oe;static CP437=new Ie("cp437",0,2);static ISO_8859_1=new Ie("iso-8859-1",1,3);static ISO_8859_2=new Ie("iso-8859-2",4);static ISO_8859_3=new Ie("iso-8859-3",5);static ISO_8859_4=new Ie("iso-8859-4",6);static ISO_8859_5=new Ie("iso-8859-5",7);static ISO_8859_6=new Ie("iso-8859-6",8);static ISO_8859_7=new Ie("iso-8859-7",9);static ISO_8859_8=new Ie("iso-8859-8",10);static ISO_8859_9=new Ie("iso-8859-9",11);static ISO_8859_10=new Ie("iso-8859-10",12);static ISO_8859_11=new Ie("iso-8859-11",13);static ISO_8859_13=new Ie("iso-8859-13",15);static ISO_8859_14=new Ie("iso-8859-14",16);static ISO_8859_15=new Ie("iso-8859-15",17);static ISO_8859_16=new Ie("iso-8859-16",18);static SJIS=new Ie("sjis",20);static CP1250=new Ie("cp1250",21);static CP1251=new Ie("cp1251",22);static CP1252=new Ie("cp1252",23);static CP1256=new Ie("cp1256",24);static UTF_16BE=new Ie("utf-16be",25);static UTF_8=new Ie("utf-8",26);static ASCII=new Ie("ascii",27,170);static BIG5=new Ie("big5",28);static GB18030=new Ie("gb18030",29);static EUC_KR=new Ie("euc-kr",30);constructor(e,...t){this.#se=e,this.#oe=t;for(const e of t)Ce.set(e,this)}get label(){return this.#se}get values(){return this.#oe}}function Se(e,t){return new TextDecoder(t.label).decode(e)}const Ee="0123456789",ve=`${Ee}ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:`;function ke(e){const t=e.read(8);if(0==(128&t))return 127&t;if(128==(192&t)){return(63&t)<<8|e.read(8)}if(192==(224&t)){return(31&t)<<16|e.read(16)}throw new Error("illegal eci value")}const Ae=String.fromCharCode(29);function Oe(e){return e.replace(/%+/g,(e=>{const t=1&e.length;return e=e.replace(/%%/g,"%"),t?e.replace(/%$/,Ae):e}))}function Me(e,t,n){let r="";for(;t>1;){if(e.available()<11)throw new Error("illegal bits length");const n=e.read(11);r+=ve.charAt(n/45),r+=ve.charAt(n%45),t-=2}if(1===t){if(e.available()<6)throw new Error("illegal bits length");r+=ve.charAt(e.read(6))}return n?Oe(r):r}function Te(e,t,n,r,s){if(e.available()<8*t)throw new Error("illegal bits length");const o=new Uint8Array(t),i=null!=s?function(e){const t=Ce.get(e);if(t)return t;throw Error("illegal charset value")}(s):Ie.ISO_8859_1;for(let n=0;n<t;n++)o[n]=e.read(8);const w=n(o,i);return r?Oe(w):w}function Ne(e,t){if(e.available()<13*t)throw new Error("illegal bits length");let n=0;const r=new Uint8Array(2*t);for(;t>0;){const s=e.read(13);let o=s/96<<8|s%96;o+=o<2560?41377:42657,r[n]=o>>8&255,r[n+1]=255&o,t--,n+=2}return new TextDecoder("gb2312").decode(r)}function Re(e,t){if(e.available()<13*t)throw new Error("illegal bits length");let n=0;const r=new Uint8Array(2*t);for(;t>0;){const s=e.read(13);let o=s/192<<8|s%192;o+=o<7936?33088:49472,r[n]=o>>8&255,r[n+1]=255&o,t--,n+=2}return new TextDecoder("shift-jis").decode(r)}function _e(e,t){let n="";for(;t>=3;){if(e.available()<10)throw new Error("illegal bits length");const r=e.read(10);if(r>=1e3)throw new Error("illegal numeric codeword");n+=Ee.charAt(r/100),n+=Ee.charAt(r/10%10),n+=Ee.charAt(r%10),t-=3}if(2===t){if(e.available()<7)throw new Error("illegal bits length");const t=e.read(7);if(t>=100)throw new Error("illegal numeric codeword");n+=Ee.charAt(t/10),n+=Ee.charAt(t%10)}else if(1===t){if(e.available()<4)throw new Error("illegal bits length");const t=e.read(4);if(t>=10)throw new Error("illegal numeric codeword");n+=Ee.charAt(t)}return n}function De(t,n,r){let s,o;switch(t){case 0:o=r+n&1;break;case 1:o=1&r;break;case 2:o=n%3;break;case 3:o=(r+n)%3;break;case 4:o=e(r/2)+e(n/3)&1;break;case 5:s=r*n,o=(1&s)+s%3;break;case 6:s=r*n,o=(1&s)+s%3&1;break;case 7:o=r*n%3+(r+n&1)&1;break;default:throw new Error(`illegal mask: ${t}`)}return 0===o}const Be=new Map;class Pe{#ie;#r;#V;static L=new Pe("L",0,1);static M=new Pe("M",1,0);static Q=new Pe("Q",2,3);static H=new Pe("H",3,2);constructor(e,t,n){this.#r=n,this.#ie=e,this.#V=t,Be.set(n,this)}get bits(){return this.#r}get name(){return this.#ie}get level(){return this.#V}}const Le=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]];class Ue{#Q;#V;constructor(e){this.#Q=7&e,this.#V=function(e){const t=Be.get(e);if(null!=t)return t;throw new Error("illegal error correction bits")}(e>>3&3)}get mask(){return this.#Q}get level(){return this.#V}}function Fe(e,t,n,r){return e.get(t,n)?r<<1|1:r<<1}class Ze{#C;#f;constructor(e){const{width:t,height:n}=e;this.#f=e.clone(),this.#C=Math.min(t,n)}readVersion(){const t=this.#C,r=e((t-17)/4);if(r<1)throw new Error("illegal version");if(r<=6)return k[r-1];let s=0,o=0;const i=t-11,w=this.#f;for(let e=5;e>=0;e--)for(let n=t-9;n>=i;n--)s=Fe(w,n,e,s);for(let e=5;e>=0;e--)for(let n=t-9;n>=i;n--)o=Fe(w,e,n,o);const a=function(e,t){let r=32,s=0;const{length:o}=E;for(let i=0;i<o;i++){const o=E[i];if(e===o||t===o)return k[i+6];let w=n(e^o);w<r&&(r=w,s=i+7),e!==t&&(w=n(t^o),w<r&&(r=w,s=i+7))}if(r<=3&&s>=7)return k[s-1];throw new Error("unable to decode version")}(s,o);if(a.size>t)throw new Error("matrix size too small for version");return a}readFormatInfo(){let e=0,t=0;const r=this.#f,s=this.#C,o=s-7;for(let t=0;t<=8;t++)6!==t&&(e=Fe(r,t,8,e));for(let t=7;t>=0;t--)6!==t&&(e=Fe(r,8,t,e));for(let e=s-1;e>=o;e--)t=Fe(r,8,e,t);for(let e=s-8;e<s;e++)t=Fe(r,e,8,t);return function(e,t){let r=32,s=0;for(const[o,i]of Le){if(e===o||t===o)return new Ue(i);let w=n(e^o);w<r&&(r=w,s=i),e!==t&&(w=n(t^o),w<r&&(r=w,s=i))}if(r<=3)return new Ue(s);throw new Error("unable to decode format information")}(e,t)}readCodewords(e,t){let n=0,r=0,o=0,i=!0;const w=this.#C,a=this.#f,c=e.getECBlocks(t),l=function({size:e,version:t,alignmentPatterns:n}){const{length:r}=n,o=new s(e,e),i=r-1;o.setRegion(0,0,9,9),o.setRegion(e-8,0,8,9),o.setRegion(0,e-8,9,8);for(let e=0;e<r;e++){const t=n[e]-2;for(let s=0;s<r;s++)0===e&&(0===s||s===i)||e===i&&0===s||o.setRegion(n[s]-2,t,5,5)}return o.setRegion(6,9,1,e-17),o.setRegion(9,6,e-17,1),t>6&&(o.setRegion(e-11,0,3,6),o.setRegion(0,e-11,6,3)),o}(e),u=new Uint8Array(c.numTotalCodewords);for(let e=w-1;e>0;e-=2){6===e&&e--;for(let t=0;t<w;t++){const s=i?w-1-t:t;for(let t=0;t<2;t++){const i=e-t;l.get(i,s)||(n++,o<<=1,a.get(i,s)&&(o|=1),8===n&&(u[r++]=o,n=0,o=0))}}i=!i}if(r!==c.numTotalCodewords)throw new Error("illegal codewords length");return u}unmask(e){const t=this.#C,n=this.#f;for(let r=0;r<t;r++)for(let s=0;s<t;s++)De(e,s,r)&&n.flip(s,r)}remask(e){this.unmask(e)}mirror(){const e=this.#C,t=this.#f;for(let n=0;n<e;n++)for(let r=n+1;r<e;r++)t.get(n,r)!==t.get(r,n)&&(t.flip(n,r),t.flip(r,n))}}class He{#we;#m;constructor(e,t){this.#we=e,this.#m=t}get codewords(){return this.#we}get numDataCodewords(){return this.#m}}class je{#ae;#ce;constructor(e,t){const{length:n}=t;if(n<=0)throw new Error("polynomial coefficients cannot empty");if(this.#ae=e,n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;if(e===n)this.#ce=new Int32Array([0]);else{const r=new Int32Array(n-e);r.set(t.subarray(e)),this.#ce=r}}else this.#ce=t}get coefficients(){return this.#ce}isZero(){return 0===this.#ce[0]}getDegree(){return this.#ce.length-1}getCoefficient(e){const t=this.#ce;return t[t.length-1-e]}evaluate(e){if(0===e)return this.getCoefficient(0);let t;const n=this.#ce;if(1===e){t=0;for(const e of n)t^=e;return t}[t]=n;const r=this.#ae,{length:s}=n;for(let o=1;o<s;o++)t=r.multiply(e,t)^n[o];return t}multiply(e){const t=this.#ae,n=this.#ce,{length:r}=n;if(e instanceof je){if(this.isZero()||e.isZero())return t.zero;const s=e.#ce,o=s.length,i=new Int32Array(r+o-1);for(let e=0;e<r;e++){const r=n[e];for(let n=0;n<o;n++)i[e+n]^=t.multiply(r,s[n])}return new je(t,i)}if(0===e)return t.zero;if(1===e)return this;const s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=t.multiply(n[o],e);return new je(t,s)}multiplyByMonomial(e,t){const n=this.#ae;if(0===t)return n.zero;const r=this.#ce,{length:s}=r,o=new Int32Array(s+e);for(let e=0;e<s;e++)o[e]=n.multiply(r[e],t);return new je(n,o)}addOrSubtract(e){if(this.isZero())return e;if(e.isZero())return this;let t=e.#ce,n=t.length,r=this.#ce,s=r.length;n<s&&([n,s]=[s,n],[t,r]=[r,t]);const o=n-s,i=new Int32Array(n);i.set(t.subarray(0,o));for(let e=o;e<n;e++)i[e]=r[e-o]^t[e];return new je(this.#ae,i)}divide(e){const t=this.#ae;let n=t.zero,r=this;const s=e.getCoefficient(e.getDegree()),o=t.invert(s);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const s=r.getDegree(),i=s-e.getDegree(),w=t.multiply(r.getCoefficient(s),o),a=e.multiplyByMonomial(i,w),c=t.buildPolynomial(i,w);n=n.addOrSubtract(c),r=r.addOrSubtract(a)}return[n,r]}}const $e=new class{#C;#le;#ue;#he;#fe;#de;constructor(e,t,n){let r=1;const s=new Int32Array(t);for(let n=0;n<t;n++)s[n]=r,r*=2,r>=t&&(r^=e,r&=t-1);const o=new Int32Array(t);for(let e=0,n=t-1;e<n;e++)o[s[e]]=e;this.#C=t,this.#fe=s,this.#de=o,this.#he=n,this.#le=new je(this,new Int32Array([1])),this.#ue=new je(this,new Int32Array([0]))}get size(){return this.#C}get one(){return this.#le}get zero(){return this.#ue}get generator(){return this.#he}exp(e){return this.#fe[e]}log(e){return this.#de[e]}invert(e){return this.#fe[this.#C-this.#de[e]-1]}multiply(e,t){if(0===e||0===t)return 0;const n=this.#de;return this.#fe[(n[e]+n[t])%(this.#C-1)]}buildPolynomial(e,t){if(0===t)return this.#ue;const n=new Int32Array(e+1);return n[0]=t,new je(this,n)}}(285,256,0);class qe{#ae;constructor(e=$e){this.#ae=e}decode(e,t){let n=!0;const r=this.#ae,{generator:s}=r,o=new je(r,e),i=new Int32Array(t);for(let e=0;e<t;e++){const w=o.evaluate(r.exp(e+s));i[t-1-e]=w,0!==w&&(n=!1)}if(!n){const n=new je(r,i),[s,o]=function(e,t,n,r){t.getDegree()<n.getDegree()&&([t,n]=[n,t]);let s=n,o=e.one,i=t,w=e.zero;for(;2*s.getDegree()>=r;){let t=w,n=i;if(w=o,i=s,i.isZero())throw new Error("remainder last was zero");s=n;let r=e.zero,a=s.getDegree();const c=i.getDegree(),l=i.getCoefficient(c),u=e.invert(l);for(;a>=c&&!s.isZero();){const t=s.getDegree()-c,n=e.multiply(s.getCoefficient(a),u);r=r.addOrSubtract(e.buildPolynomial(t,n)),s=s.addOrSubtract(i.multiplyByMonomial(t,n)),a=s.getDegree()}if(o=r.multiply(w).addOrSubtract(t),a>=c)throw new Error("division algorithm failed to reduce polynomial")}const a=o.getCoefficient(0);if(0===a)throw new Error("sigma tilde(0) was zero");const c=e.invert(a);return[o.multiply(c),s.multiply(c)]}(r,r.buildPolynomial(t,1),n,t),w=function(e,t){const n=t.getDegree();if(1===n)return new Int32Array([t.getCoefficient(1)]);let r=0;const{size:s}=e,o=new Int32Array(n);for(let i=1;i<s&&r<n;i++)0===t.evaluate(i)&&(o[r++]=e.invert(i));if(r!==n)throw new Error("error locator degree does not match number of roots");return o}(r,s),a=function(e,t,n){const{length:r}=n,s=new Int32Array(r);for(let o=0;o<r;o++){let i=1;const w=e.invert(n[o]);for(let t=0;t<r;t++)if(o!==t){const r=e.multiply(n[t],w),s=0==(1&r)?1|r:-2&r;i=e.multiply(i,s)}s[o]=e.multiply(t.evaluate(w),e.invert(i)),0!==e.generator&&(s[o]=e.multiply(s[o],w))}return s}(r,o,w),c=w.length,l=e.length;for(let t=0;t<c;t++){const n=l-1-r.log(w[t]);if(n<0)throw new Error("bad error location");e[n]=e[n]^a[t]}return c}return 0}}function Ge(e,t){const n=new Int32Array(e),r=e.length-t;return[n,(new qe).decode(n,r)]}function Je(e,t,{mask:n,level:r}){let s=0,o=0;e.unmask(n);const i=t.getECBlocks(r),w=function(e,t,n){const{ecBlocks:r,numTotalCodewords:s,numECCodewordsPerBlock:o}=t.getECBlocks(n);if(e.length!==s)throw new Error("failed to get data blocks");const i=[];for(const{count:e,numDataCodewords:t}of r)for(let n=0;n<e;n++){const e=o+t;i.push(new He(new Uint8Array(e),t))}const{length:w}=i;let a=w-1;const c=i[0].codewords.length;for(;a>=0&&i[a].codewords.length!==c;)a--;a++;let l=0;const u=c-o;for(let t=0;t<u;t++)for(let n=0;n<w;n++)i[n].codewords[t]=e[l++];for(let t=a;t<w;t++)i[t].codewords[u]=e[l++];const h=i[0].codewords.length;for(let t=u;t<h;t++)for(let n=0;n<w;n++){const r=n<a?t:t+1;i[n].codewords[r]=e[l++]}return i}(e.readCodewords(t,r),t,r),a=new Uint8Array(i.numTotalDataCodewords);for(const{codewords:e,numDataCodewords:t}of w){const[n,r]=Ge(e,t);a.set(n.subarray(0,t),s),o+=r,s+=t}return[a,o]}class Ke{#ge;constructor({decode:e=Se}={}){this.#ge=e}decode(e){let t,n,r,s=0,o=!1;const i=new Ze(e);try{t=i.readVersion(),r=i.readFormatInfo(),[n,s]=Je(i,t,r)}catch{null!=r&&i.remask(r.mask),i.mirror(),o=!0,t=i.readVersion(),r=i.readFormatInfo(),[n,s]=Je(i,t,r)}return new be(function(e,t,{},n){let r,s,o,i="",w=-1,a=!1,c=!1,l=!1,u=!1;const h=new pe(e);do{switch(s=h.available()<4?ze.TERMINATOR:xe(h.read(4)),s){case ze.TERMINATOR:break;case ze.FNC1_FIRST_POSITION:a=!0;break;case ze.FNC1_SECOND_POSITION:c=!0,w=h.read(8);break;case ze.STRUCTURED_APPEND:if(h.available()<16)throw new Error("illegal structured append");u=Object.freeze({index:h.read(4),parity:h.read(8),count:h.read(4)+1});break;case ze.ECI:o=ke(h);break;default:if(s===ze.HANZI&&1!==h.read(4))throw new Error("illegal hanzi subset");const e=h.read(s.getCharacterCountBits(t));switch(s){case ze.ALPHANUMERIC:i+=Me(h,e,a||c);break;case ze.BYTE:i+=Te(h,e,n,a||c,o);break;case ze.HANZI:i+=Ne(h,e);break;case ze.KANJI:i+=Re(h,e);break;case ze.NUMERIC:i+=_e(h,e);break;default:throw new Error("")}}}while(s!==ze.TERMINATOR);return a?l=Object.freeze(["GS1"]):c&&(l=Object.freeze(["AIM",w])),r=null!=o?a?4:c?6:2:a?3:c?5:1,{content:i,codewords:e,structured:u,symbology:`]Q${r}`,fnc1:l}}(n,t,r,this.#ge),t,r,s,o)}}function Qe(e){return{x:e.x,y:e.y}}function Ve(e){return{x:e.x,y:e.y,moduleSize:e.moduleSize}}self.addEventListener("message",(async({data:e})=>{const{uid:t,image:n}=e,{width:r,height:s}=n,o=new OffscreenCanvas(r,s).getContext("2d");o.drawImage(n,0,0);const i=function({data:e,width:t,height:n}){const r=new Uint8Array(t*n);for(let s=0;s<n;s++){const n=s*t;for(let s=0;s<t;s++){const t=4*(n+s),o=e[t],i=e[t+1],w=e[t+2];r[n+s]=306*o+601*i+117*w+512>>10}}return r}(o.getImageData(0,0,r,s)),a=function(e,t,n){if(e.length!==t*n)throw new Error("luminances length must be equals to width * height");return t<h||n<h?w(e,t,n):m(e,t,n)}(i,r,s);e.invert&&a.flip();const c=new me({strict:e.strict}).detect(a),l=[],u=new Ke;let f=c.next();for(;!f.done;){let e=!1;const t=f.value;try{const{size:n,finder:r,alignment:s}=t,o=u.decode(t.matrix),{topLeft:i,topRight:w,bottomLeft:a}=r,c=t.mapping(0,0),h=t.mapping(n,0),f=t.mapping(n,n),d=t.mapping(0,n),g=t.mapping(6.5,6.5),m=t.mapping(n-6.5,6.5),b=t.mapping(6.5,n-6.5);l.push({content:o.content,alignment:s?Ve(s):null,finder:[Ve(i),Ve(w),Ve(a)],timing:[Qe(g),Qe(m),Qe(b)],corners:[Qe(c),Qe(h),Qe(f),Qe(d)]}),e=!0}catch{}f=c.next(e)}if(l.length>0){const e={type:"ok",payload:{uid:t,image:n,items:l}};self.postMessage(e,[n])}else{const e={type:"error",message:"未发现二维码"};self.postMessage(e)}}))}();