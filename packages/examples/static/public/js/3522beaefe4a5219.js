"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[379],{956:function(e,n,l){l.d(n,{Z:function(){return s}});var r=l(2363);function s(e){let n=(0,r.useRef)(e);return n.current=(0,r.useMemo)(()=>e,[e]),n}},8922:function(e,n,l){l.d(n,{Z:function(){return t}});var r=l(2363),s=l(956);function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,l=(0,r.useRef)(),t=(0,s.Z)(n),[i,a]=(0,r.useState)(e),u=(0,r.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.current;clearTimeout(l.current),n<=0?a(e):l.current=setTimeout(()=>{a(e)},n)},[]);return(0,r.useEffect)(()=>()=>{clearTimeout(l.current)},[]),[i,u]}},379:function(e,n,l){l.r(n),l.d(n,{default:function(){return y}});var r=l(9980),s={result:"ee1aa457",preview:"d52c0583"},t=l(2363),i=l(677),a=l(8922),u=l(2776),c=l(6139),d=l(1490),o=l(4498),x=l(5922),h=l(4846),m=l(7263),j=l(2682),f=l(8360),v=l(2659),Z=l(8496);let{Option}=u.default,{TextArea:p}=c.default,{Item:b,useForm:g,useWatch:w}=d.default;function A(e){return"string"==typeof e?e:e.toHexString()}let I=(0,t.memo)(function(e){let{value:n}=e;if(n)switch(n.type){case"ok":return(0,r.jsx)(o.Z,{src:n.payload,alt:"preview",className:s.preview});case"error":return(0,r.jsx)(x.Z,{type:"error",message:n.message,showIcon:!0});default:return(0,r.jsx)(x.Z,{type:"error",message:"发生未知错误",showIcon:!0})}return null});var y=(0,t.memo)(function(){let e=(0,t.useRef)(!1),n=(0,t.useRef)(),[c]=g(),o=w(["fnc1"],c),x=w("content",c),[y,k]=(0,a.Z)(!1),[M,S]=(0,t.useState)(),T=(0,t.useMemo)(()=>({level:"M",fnc1:"None",mode:"Auto",moduleSize:4,quietZone:16,aimIndicator:0,version:"Auto",charset:"UTF_8",background:"#ffffff",foreground:"#000000",content:"https://github.com/nuintun/qrcode"}),[]),C=(0,t.useMemo)(()=>{let e=[(0,r.jsx)(Option,{value:"Auto",children:"Auto"},"Auto")];for(let n=1;n<=40;n++)e.push((0,r.jsx)(Option,{value:n,children:n},n));return e},[]),L=(0,t.useCallback)(l=>{let r=n.current;if(r&&!e.current){k(!0),e.current=!0;let n={...l,background:A(l.background),foreground:A(l.foreground)};r.postMessage(n)}},[]);return(0,t.useEffect)(()=>{let r=new Worker(new URL(l.p+l.u(130),l.b));return r.addEventListener("message",n=>{let{data:l}=n;S(l),k(!1),e.current=!1}),n.current=r,()=>{r.terminate()}},[]),(0,r.jsxs)("div",{className:"ui-page",children:[(0,r.jsx)(d.default,{form:c,layout:"vertical",onFinish:L,initialValues:T,children:(0,r.jsxs)(h.Z,{gutter:24,children:[(0,r.jsx)(m.Z,{span:24,children:(0,r.jsx)(b,{name:"content",children:(0,r.jsx)(p,{rows:8,allowClear:!0})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"fnc1",label:"支持 FNC1",children:(0,r.jsxs)(u.default,{children:[(0,r.jsx)(Option,{value:"None",children:"否"}),(0,r.jsx)(Option,{value:"AIM",children:"AIM"}),(0,r.jsx)(Option,{value:"GS1",children:"GS1"})]})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"aimIndicator",label:"AIM 标识",children:(0,r.jsx)(j.Z,{disabled:"AIM"!==o,min:0,max:255,style:{width:"100%"}})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"version",label:"版本大小",children:(0,r.jsx)(u.default,{children:C})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"level",label:"纠错等级",children:(0,r.jsxs)(u.default,{children:[(0,r.jsx)(Option,{value:"L",children:"Level L (7%)"}),(0,r.jsx)(Option,{value:"M",children:"Level M (15%)"}),(0,r.jsx)(Option,{value:"Q",children:"Level Q (25%)"}),(0,r.jsx)(Option,{value:"H",children:"Level H (30%)"})]})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"mode",label:"编码模式",children:(0,r.jsxs)(u.default,{children:[(0,r.jsx)(Option,{value:"Auto",selected:!0,children:"Auto"}),(0,r.jsx)(Option,{value:"Alphanumeric",children:"Alphanumeric"}),(0,r.jsx)(Option,{value:"Byte",children:"Byte"}),(0,r.jsx)(Option,{value:"Hanzi",children:"Hanzi"}),(0,r.jsx)(Option,{value:"Kanji",children:"Kanji"}),(0,r.jsx)(Option,{value:"Numeric",children:"Numeric"})]})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"charset",label:"字符编码",children:(0,r.jsxs)(u.default,{children:[(0,r.jsx)(Option,{value:"ASCII",children:"ASCII"}),(0,r.jsx)(Option,{value:"UTF_8",children:"UTF-8"}),(0,r.jsx)(Option,{value:"ISO_8859_1",children:"ISO-8859-1"})]})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"moduleSize",label:"模块大小",children:(0,r.jsx)(j.Z,{min:1,max:50,style:{width:"100%"}})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"quietZone",label:"静区大小",tooltip:"推荐 4 倍模块大小",children:(0,r.jsx)(j.Z,{min:0,max:200,style:{width:"100%"}})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"foreground",label:"前景颜色",children:(0,r.jsx)(f.Z,{showText:!0,disabledAlpha:!0})})}),(0,r.jsx)(m.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(b,{name:"background",label:"背景颜色",children:(0,r.jsx)(f.Z,{showText:!0,disabledAlpha:!0})})}),(0,r.jsx)(m.Z,{span:24,children:(0,r.jsx)(v.ZP,{type:"primary",htmlType:"submit",loading:y,disabled:!x,icon:(0,r.jsx)(i.Z,{component:Z.Z}),children:"编码"})})]})}),(0,r.jsx)("div",{className:s.result,children:(0,r.jsx)(I,{value:M})})]})})}}]);