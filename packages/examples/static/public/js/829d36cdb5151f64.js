"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[622],{1038:function(e,n,s){s.d(n,{Z:function(){return l}});var r=s(2363);function l(e){const n=(0,r.useRef)(e);return n.current=(0,r.useMemo)((()=>e),[e]),n}},9963:function(e,n,s){s.d(n,{Z:function(){return t}});var r=s(2363),l=s(1038);function t(e,n=128){const s=(0,r.useRef)(),t=(0,l.Z)(n),[a,c]=(0,r.useState)(e),u=(0,r.useCallback)(((e,n=t.current)=>{clearTimeout(s.current),n<=0?c(e):s.current=setTimeout((()=>{c(e)}),n)}),[]);return(0,r.useEffect)((()=>()=>{clearTimeout(s.current)}),[]),[a,u]}},2622:function(e,n,s){s.r(n),s.d(n,{default:function(){return M}});var r=s(9980),l="ee1aa457",t="d52c0583",a=s(2363),c=s(677),u=s(9963),i=s(3692),d=s(8086),o=s(1962),x=s(2027),h=s(4231),m=s(7671),j=s(1174),f=s(5106),v=s(9831),Z=s(4729),p=s(4540);const{Option:b}=i.default,{TextArea:g}=d.default,{Item:A,useForm:w,useWatch:I}=o.default;function y(e){return"string"==typeof e?e:e.toHexString()}const k=(0,a.memo)((function({value:e}){if(e)switch(e.type){case"ok":return(0,r.jsx)(x.Z,{src:e.payload,alt:"preview",className:t});case"error":return(0,r.jsx)(h.Z,{type:"error",message:e.message,showIcon:!0});default:return(0,r.jsx)(h.Z,{type:"error",message:"发生未知错误",showIcon:!0})}return null}));var M=(0,a.memo)((function(){const e=(0,a.useRef)(!1),n=(0,a.useRef)(),[t]=w(),d=I(["fnc1"],t),x=I("content",t),[h,M]=(0,u.Z)(!1),[S,T]=(0,a.useState)(),C=(0,a.useMemo)((()=>({level:"M",fnc1:"None",mode:"Auto",moduleSize:4,quietZone:16,aimIndicator:0,version:"Auto",charset:"UTF_8",background:"#ffffff",foreground:"#000000",content:"https://github.com/nuintun/qrcode"})),[]),L=(0,a.useMemo)((()=>{const e=[(0,r.jsx)(b,{value:"Auto",children:"Auto"},"Auto")];for(let n=1;n<=40;n++)e.push((0,r.jsx)(b,{value:n,children:n},n));return e}),[]),N=(0,a.useCallback)((s=>{const r=n.current;if(r&&!e.current){M(!0),e.current=!0;const n={...s,background:y(s.background),foreground:y(s.foreground)};r.postMessage(n)}}),[]);return(0,a.useEffect)((()=>{const r=new Worker(new URL(s.p+s.u(620),s.b));return r.addEventListener("message",(({data:n})=>{T(n),M(!1),e.current=!1})),n.current=r,()=>{r.terminate()}}),[]),(0,r.jsxs)("div",{className:"ui-page",children:[(0,r.jsx)(o.default,{form:t,layout:"vertical",onFinish:N,initialValues:C,children:(0,r.jsxs)(m.Z,{gutter:24,children:[(0,r.jsx)(j.Z,{span:24,children:(0,r.jsx)(A,{name:"content",children:(0,r.jsx)(g,{rows:8,allowClear:!0})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"fnc1",label:"支持 FNC1",children:(0,r.jsxs)(i.default,{children:[(0,r.jsx)(b,{value:"None",children:"否"}),(0,r.jsx)(b,{value:"AIM",children:"AIM"}),(0,r.jsx)(b,{value:"GS1",children:"GS1"})]})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"aimIndicator",label:"AIM 标识",children:(0,r.jsx)(f.Z,{disabled:"AIM"!==d,min:0,max:255,style:{width:"100%"}})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"version",label:"版本大小",children:(0,r.jsx)(i.default,{children:L})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"level",label:"纠错等级",children:(0,r.jsxs)(i.default,{children:[(0,r.jsx)(b,{value:"L",children:"Level L (7%)"}),(0,r.jsx)(b,{value:"M",children:"Level M (15%)"}),(0,r.jsx)(b,{value:"Q",children:"Level Q (25%)"}),(0,r.jsx)(b,{value:"H",children:"Level H (30%)"})]})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"mode",label:"编码模式",children:(0,r.jsxs)(i.default,{children:[(0,r.jsx)(b,{value:"Auto",selected:!0,children:"Auto"}),(0,r.jsx)(b,{value:"Alphanumeric",children:"Alphanumeric"}),(0,r.jsx)(b,{value:"Byte",children:"Byte"}),(0,r.jsx)(b,{value:"Hanzi",children:"Hanzi"}),(0,r.jsx)(b,{value:"Kanji",children:"Kanji"}),(0,r.jsx)(b,{value:"Numeric",children:"Numeric"})]})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"charset",label:"字符编码",children:(0,r.jsxs)(i.default,{children:[(0,r.jsx)(b,{value:"ASCII",children:"ASCII"}),(0,r.jsx)(b,{value:"UTF_8",children:"UTF-8"}),(0,r.jsx)(b,{value:"ISO_8859_1",children:"ISO-8859-1"})]})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"moduleSize",label:"模块大小",children:(0,r.jsx)(f.Z,{min:1,max:50,style:{width:"100%"}})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"quietZone",label:"静区大小",tooltip:"推荐 4 倍模块大小",children:(0,r.jsx)(f.Z,{min:0,max:200,style:{width:"100%"}})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"foreground",label:"前景颜色",children:(0,r.jsx)(v.Z,{showText:!0,disabledAlpha:!0})})}),(0,r.jsx)(j.Z,{md:6,sm:12,xs:24,children:(0,r.jsx)(A,{name:"background",label:"背景颜色",children:(0,r.jsx)(v.Z,{showText:!0,disabledAlpha:!0})})}),(0,r.jsx)(j.Z,{span:24,children:(0,r.jsx)(Z.ZP,{type:"primary",htmlType:"submit",loading:h,disabled:!x,icon:(0,r.jsx)(c.Z,{component:p.Z}),children:"编码"})})]})}),(0,r.jsx)("div",{className:l,children:(0,r.jsx)(k,{value:S})})]})}))}}]);